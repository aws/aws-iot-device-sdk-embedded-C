<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Over-the-air Update: OTA_ActivateNewImage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="foobar.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Over-the-air Update
   &#160;<span id="projectnumber">v3.1.0</span>
   </div>
   <div id="projectbrief">Client library for AWS IoT OTA</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ota_activatenewimage_function.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OTA_ActivateNewImage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Activate the newest MCU image received via OTA.</p>
<div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> <a class="code" href="ota_8c.html#a5169ba09148e7f5668a90e776e712f8b">OTA_ActivateNewImage</a>( <span class="keywordtype">void</span> );</div>
</div><!-- fragment --><p> This function should reset the MCU and cause a reboot of the system to execute the newly updated firmware. It should be called by the user code sometime after the OtaJobEventActivate event is passed to the users application via the OTA Job Complete Callback mechanism. Refer to the <a class="el" href="ota_8h.html#a9011a6007328dfb3bfde5fdb645fa52f">OTA_Init</a> function for more information about configuring the callback.</p>
<dl class="section return"><dt>Returns</dt><dd>OtaErrNone if successful, otherwise an error code prefixed with 'OtaErr' from the list above.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> otaAppCallback( <a class="code" href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a> event,</div>
<div class="line">                            <span class="keyword">const</span> <span class="keywordtype">void</span> * pData )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> otaErr = <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a>;</div>
<div class="line">    <span class="keywordflow">if</span>( event == <a class="code" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7aaf02fd22119771d2980c7af439fa3280">OtaJobEventActivate</a> )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Activate the new firmware image.</span></div>
<div class="line">        <span class="comment">// This calls the platform specific code required to</span></div>
<div class="line">        <span class="comment">// activate the received OTA update firmware.</span></div>
<div class="line">        otaErr = <a class="code" href="ota_8c.html#a5169ba09148e7f5668a90e776e712f8b">OTA_ActivateNewImage</a>();</div>
<div class="line">        <span class="keywordflow">if</span>( otaErr == <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2daf5d3845d8b68e0c91cff60d2a38a2678">OtaErrActivateFailed</a> )</div>
<div class="line">        {</div>
<div class="line">             <span class="comment">// Handle Image activation failure by requesting manual response, sending</span></div>
<div class="line">             <span class="comment">// error logs or retrying activation.</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Handle other events</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__ota__enum__types_html_ga96a2e1f5cfad783897e805196eee39a7"><div class="ttname"><a href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a></div><div class="ttdeci">OtaJobEvent_t</div><div class="ttdoc">OTA Job callback events.</div><div class="ttdef"><b>Definition:</b> ota.h:165</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_ga7ab3c74dc057383c56c6cb9aa6bf0b2d"><div class="ttname"><a href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a></div><div class="ttdeci">OtaErr_t</div><div class="ttdoc">The OTA API return status. OTA agent error codes are in the upper 8 bits of the 32 bit OTA error word...</div><div class="ttdef"><b>Definition:</b> ota.h:79</div></div>
<div class="ttc" id="aota_8c_html_a5169ba09148e7f5668a90e776e712f8b"><div class="ttname"><a href="ota_8c.html#a5169ba09148e7f5668a90e776e712f8b">OTA_ActivateNewImage</a></div><div class="ttdeci">OtaErr_t OTA_ActivateNewImage(void)</div><div class="ttdoc">Activate the newest MCU image received via OTA.</div><div class="ttdef"><b>Definition:</b> ota.c:3264</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02"><div class="ttname"><a href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a></div><div class="ttdeci">@ OtaErrNone</div><div class="ttdoc">No error occurred during the operation.</div><div class="ttdef"><b>Definition:</b> ota.h:80</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga7ab3c74dc057383c56c6cb9aa6bf0b2daf5d3845d8b68e0c91cff60d2a38a2678"><div class="ttname"><a href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2daf5d3845d8b68e0c91cff60d2a38a2678">OtaErrActivateFailed</a></div><div class="ttdeci">@ OtaErrActivateFailed</div><div class="ttdoc">Failed to activate the new image.</div><div class="ttdef"><b>Definition:</b> ota.h:102</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga96a2e1f5cfad783897e805196eee39a7aaf02fd22119771d2980c7af439fa3280"><div class="ttname"><a href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7aaf02fd22119771d2980c7af439fa3280">OtaJobEventActivate</a></div><div class="ttdeci">@ OtaJobEventActivate</div><div class="ttdoc">OTA receive is authenticated and ready to activate.</div><div class="ttdef"><b>Definition:</b> ota.h:166</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
